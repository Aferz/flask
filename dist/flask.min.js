/*!
 * Flask.js v1.3.0
 * (c) 2016 Alejandro Fernandez
 * Released under the MIT License.
 */
!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),a=i(o),u=r(15),c=n(u);a["default"]._version="1.3.0",a["default"]._env="development",a["default"].listeners=c,t["default"]=a["default"]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(3),u=n(a),c=r(15),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.container=new u["default"](this,t)}return o(e,[{key:"setConfigValue",value:function(e,t){return this.container.addConfigValue(e,t),this}},{key:"parameter",value:function(e,t){return this.container.addParameter(e,t),this}},{key:"service",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.container.addService(e,t,r),this}},{key:"singleton",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.container.addService(e,t,r,!0),this}},{key:"tag",value:function(e,t){return this.container.addTag(e,t),this}},{key:"decorate",value:function(e,t){return this.container.addDecorator(e,t),this}},{key:"listen",value:function(e,t,r){return console.warn("Method deprecated since 1.3.0 release. I't will be removed in 2.0 release. Use event named methods."),this.container.addListener(e,t,r),this}},{key:"onResolved",value:function(e,t){return this.container.addListener(c.ON_RESOLVED,e,t),this}},{key:"cfg",value:function(e){return console.warn("Method deprecated since 1.3.0 release. I't will be removed in 2.0 release. Use '.config()' method instead."),this.config(e)}},{key:"config",value:function(e){return this.container.getConfigValue(e)}},{key:"value",value:function(e){return this.container.makeParameter(e)}},{key:"make",value:function(e){return this.container.makeService(e)}},{key:"tagged",value:function(e){return this.container.makeTag(e)}},{key:"wrap",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.container.makeFunction(e,t,r)}},{key:"call",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.wrap(e,t,r)()}}]),e}();t["default"]=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(4),c=n(u),s=r(5),f=n(s),l=r(7),p=n(l),v=r(8),d=n(v),y=r(9),h=n(y),g=r(10),b=n(g),w=r(13),O=n(w),m=r(14),E=n(m),P=r(16),j=n(P),k=r(12),_=function(){function e(t,r){o(this,e),this.config={},this.tags=[],this.services=[],this.parameters=[],this.resolver=new b["default"](this),this.configResolver=new O["default"](this),this.eventDispatcher=new E["default"](t),this.decoratorResolver=new j["default"](t),this.configResolver.instantiationConfiguration(r)}return a(e,[{key:"addConfigValue",value:function(e,t){this.config[e]=t}},{key:"addParameter",value:function(e,t){this.parameters.push(new d["default"](e,this.createReference(t)))}},{key:"addService",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=r.map(function(e){return n.createReference(e)});i?this.services.push(new p["default"](e,t,o)):this.services.push(new f["default"](e,t,o))}},{key:"addTag",value:function(e,t){var r=this;Array.isArray(t)||(t=[t]);var n=t.map(function(e){return r.createReference(e)}),i=this.findTag(e);i?i.addReferences(n):this.tags.push(new c["default"](e,n))}},{key:"addDecorator",value:function(e,t){this.decoratorResolver.add(e,t)}},{key:"addListener",value:function(e,t,r){this.eventDispatcher.addListener(e,t,r)}},{key:"getConfigValue",value:function(e){return this.config[e]||null}},{key:"makeParameter",value:function(e){var t=this.findParameter(e);if(!t)throw(0,k.paramNotRegisteredException)(e);return this.resolver.resolveParameter(t)}},{key:"makeService",value:function(e){var t=this.findService(e);if(!t)throw(0,k.serviceNotRegisteredException)(e);return this.resolver.resolveService(t)}},{key:"makeTag",value:function(e){var t=this.findTag(e);if(!t)throw(0,k.tagNotRegisteredException)(e);return this.resolver.resolveTag(t)}},{key:"makeFunction",value:function(e,t,r){var n=this,o=t.map(function(e){return n.createReference(e)}).map(function(e){return n.resolver.resolveReference(e)});return e.bind.apply(e,[r].concat(i(o)))}},{key:"findParameter",value:function(e){return this.parameters.find(function(t){return t.alias===e})}},{key:"findService",value:function(e){return this.services.find(function(t){return t.alias===e})}},{key:"findTag",value:function(e){return this.tags.find(function(t){return t.alias===e})}},{key:"createReference",value:function(e){return new h["default"](this.config,e)}}]),e}();t["default"]=_},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){r(this,e),this._alias=t,this._references=n}return n(e,[{key:"addReferences",value:function(e){this._references=this._references.concat(e)}},{key:"make",value:function(e){return e}},{key:"alias",get:function(){return this._alias}},{key:"references",get:function(){return this._references}}]),e}();t["default"]=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(6),u=n(a),c=function(){function e(t,r,n){i(this,e),this._alias=t,this._definition=r,this._references=n}return o(e,[{key:"make",value:function(e){return u["default"].construct(this.definition,e)}},{key:"alias",get:function(){return this._alias}},{key:"definition",get:function(){return this._definition}},{key:"references",get:function(){return this._references}}]),e}();t["default"]=c},function(e,t,r){(function(e){!function(e){"use strict";function r(e){return/^(get|set|value|writable|enumerable|configurable)$/.test(e)}function n(e){if(Object(e)!==e)throw new TypeError("property descriptor should be an Object, given: "+e);var t={};if("enumerable"in e&&(t.enumerable=!!e.enumerable),"configurable"in e&&(t.configurable=!!e.configurable),"value"in e&&(t.value=e.value),"writable"in e&&(t.writable=!!e.writable),"get"in e){var r=e.get;if(void 0!==r&&"function"!=typeof r)throw new TypeError("property descriptor 'get' attribute must be callable or undefined, given: "+r);t.get=r}if("set"in e){var n=e.set;if(void 0!==n&&"function"!=typeof n)throw new TypeError("property descriptor 'set' attribute must be callable or undefined, given: "+n);t.set=n}if(("get"in t||"set"in t)&&("value"in t||"writable"in t))throw new TypeError("property descriptor cannot be both a data and an accessor descriptor: "+e);return t}function i(e){return void 0!==e&&("get"in e||"set"in e)}function o(e){return void 0!==e&&("value"in e||"writable"in e)}function a(e){return void 0!==e&&(!i(e)&&!o(e))}function u(e){var t=n(e);return a(t)||o(t)?("value"in t||(t.value=void 0),"writable"in t||(t.writable=!1)):("get"in t||(t.get=void 0),"set"in t||(t.set=void 0)),"enumerable"in t||(t.enumerable=!1),"configurable"in t||(t.configurable=!1),t}function c(e){return!("get"in e||"set"in e||"value"in e||"writable"in e||"enumerable"in e||"configurable"in e)}function s(e,t){return f(e.get,t.get)&&f(e.set,t.set)&&f(e.value,t.value)&&f(e.writable,t.writable)&&f(e.enumerable,t.enumerable)&&f(e.configurable,t.configurable)}function f(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function l(e){if(void 0!==e){var t=u(e);for(var n in e)r(n)||Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0,configurable:!0});return t}}function p(e){var t=n(e);for(var i in e)r(i)||Object.defineProperty(t,i,{value:e[i],writable:!0,enumerable:!0,configurable:!0});return t}function v(e,t){return{}.hasOwnProperty.call(t,e)}function d(e,t){var r=Object.getOwnPropertyDescriptor(t,e);return void 0!==r&&r.configurable===!1}function y(e){return void 0!==e&&e.configurable===!1}function h(e,t,r){if(void 0===t&&e===!1)return!1;if(void 0===t&&e===!0)return!0;if(c(r))return!0;if(s(t,r))return!0;if(t.configurable===!1){if(r.configurable===!0)return!1;if("enumerable"in r&&r.enumerable!==t.enumerable)return!1}if(a(r))return!0;if(o(t)!==o(r))return t.configurable!==!1;if(o(t)&&o(r)){if(t.configurable===!1){if(t.writable===!1&&r.writable===!0)return!1;if(t.writable===!1&&"value"in r&&!f(r.value,t.value))return!1}return!0}if(i(t)&&i(r)&&t.configurable===!1){if("set"in r&&!f(r.set,t.set))return!1;if("get"in r&&!f(r.get,t.get))return!1}return!0}function g(e,t){var r=x(e),n=void 0;if("sealed"===t)for(var o,a=+r.length,u=0;u<a;u++){o=String(r[u]);try{Object.defineProperty(e,o,{configurable:!1})}catch(c){void 0===n&&(n=c)}}else for(var o,a=+r.length,u=0;u<a;u++){o=String(r[u]);try{var s=Object.getOwnPropertyDescriptor(e,o);if(void 0!==s){var f;f=i(s)?{configurable:!1}:{configurable:!1,writable:!1},Object.defineProperty(e,o,f)}}catch(c){void 0===n&&(n=c)}}if(void 0!==n)throw n;return U.preventExtensions(e)}function b(e,t){var r=_(e);if(r)return!1;for(var n,i,a=x(e),u=void 0,c=!1,s=!1,f=+a.length,l=0;l<f;l++){n=String(a[l]);try{i=Object.getOwnPropertyDescriptor(e,n),c=c||i.configurable,o(i)&&(s=s||i.writable)}catch(p){void 0===u&&(u=p,c=!0)}}if(void 0!==u)throw u;return("frozen"!==t||s!==!0)&&c!==!0}function w(e,t){this.target=e,this.handler=t}function O(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function m(e,t){return O(t)?e.get(t):void 0}function E(e){return function t(){var r=m(B,this);return void 0!==r?t.call(r.target):e.call(this)}}function P(e){var t=m(B,e);return void 0!==t&&Array.isArray(t.target)}"undefined"==typeof WeakMap&&(e.WeakMap=function(){},e.WeakMap.prototype={get:function(e){},set:function(e,t){throw new Error("WeakMap not supported")}});var j,k,_,T,x,D=Object.preventExtensions,A=(Object.seal,Object.freeze,Object.isExtensible),S=(Object.isSealed,Object.isFrozen,Object.getPrototypeOf),R=Object.getOwnPropertyDescriptor,C=Object.defineProperty,M=Object.defineProperties,L=Object.keys,N=Object.getOwnPropertyNames,V=Object.getOwnPropertySymbols,I=Object.assign,G=Array.isArray,F=Array.prototype.concat,K=Object.prototype.isPrototypeOf,z=Object.prototype.hasOwnProperty;w.prototype={getTrap:function(e){var t=this.handler[e];if(void 0!==t){if("function"!=typeof t)throw new TypeError(e+" trap is not callable: "+t);return t}},getOwnPropertyDescriptor:function(e){var t=this.getTrap("getOwnPropertyDescriptor");if(void 0===t)return U.getOwnPropertyDescriptor(this.target,e);e=String(e);var r=t.call(this.handler,this.target,e);r=l(r);var n=Object.getOwnPropertyDescriptor(this.target,e),i=Object.isExtensible(this.target);if(void 0!==r){if(!i&&void 0===n)throw new TypeError("cannot report a new own property '"+e+"' on a non-extensible object");if(void 0!==e&&!h(i,n,r))throw new TypeError("cannot report incompatible property descriptor for property '"+e+"'");if(r.configurable===!1){if(void 0===n||n.configurable===!0)throw new TypeError("cannot report a non-configurable descriptor for configurable or non-existent property '"+e+"'");if("writable"in r&&r.writable===!1&&n.writable===!0)throw new TypeError("cannot report non-configurable, writable property '"+e+"' as non-configurable, non-writable")}return r}if(y(n))throw new TypeError("cannot report non-configurable property '"+e+"' as non-existent");if(!i&&void 0!==n)throw new TypeError("cannot report existing own property '"+e+"' as non-existent on a non-extensible object")},getPropertyDescriptor:function(e){var t=this;if(t.has(e))return{get:function(){return t.get(this,e)},set:function(r){if(t.set(this,e,r))return r;throw new TypeError("failed assignment to "+e)},enumerable:!0,configurable:!0}},defineProperty:function(e,t){var r=this.getTrap("defineProperty");if(void 0===r)return U.defineProperty(this.target,e,t);e=String(e);var n=p(t),i=r.call(this.handler,this.target,e,n);if(i=!!i,i===!0){var a=Object.getOwnPropertyDescriptor(this.target,e),u=Object.isExtensible(this.target);if(!u&&void 0===a)throw new TypeError("cannot successfully add a new property '"+e+"' to a non-extensible object");if(void 0!==a){if(!h(u,a,t))throw new TypeError("cannot define incompatible property descriptor for property '"+e+"'");if(o(a)&&a.configurable===!1&&a.writable===!0&&t.configurable===!1&&t.writable===!1)throw new TypeError("cannot successfully define non-configurable, writable  property '"+e+"' as non-configurable, non-writable")}if(t.configurable===!1&&!y(a))throw new TypeError("cannot successfully define a non-configurable descriptor for configurable or non-existent property '"+e+"'")}return i},preventExtensions:function(){var e=this.getTrap("preventExtensions");if(void 0===e)return U.preventExtensions(this.target);var t=e.call(this.handler,this.target);if(t=!!t,t&&_(this.target))throw new TypeError("can't report extensible object as non-extensible: "+this.target);return t},"delete":function(e){var t=this.getTrap("deleteProperty");if(void 0===t)return U.deleteProperty(this.target,e);e=String(e);var r=t.call(this.handler,this.target,e);r=!!r;var n;if(r===!0){if(n=Object.getOwnPropertyDescriptor(this.target,e),void 0!==n&&n.configurable===!1)throw new TypeError("property '"+e+"' is non-configurable and can't be deleted");if(void 0!==n&&!_(this.target))throw new TypeError("cannot successfully delete existing property '"+e+"' on a non-extensible object")}return r},getOwnPropertyNames:function(){return this.ownKeys()},ownKeys:function(){var e=this.getTrap("ownKeys");if(void 0===e)return U.ownKeys(this.target);for(var t=e.call(this.handler,this.target),r=Object.create(null),n=+t.length,i=new Array(n),o=0;o<n;o++){var a=String(t[o]);if(!Object.isExtensible(this.target)&&!v(a,this.target))throw new TypeError("ownKeys trap cannot list a new property '"+a+"' on a non-extensible object");r[a]=!0,i[o]=a}var u=x(this.target),c=this.target;return u.forEach(function(e){if(!r[e]){if(d(e,c))throw new TypeError("ownKeys trap failed to include non-configurable property '"+e+"'");if(!Object.isExtensible(c)&&v(e,c))throw new TypeError("ownKeys trap cannot report existing own property '"+e+"' as non-existent on a non-extensible object")}}),i},isExtensible:function(){var e=this.getTrap("isExtensible");if(void 0===e)return U.isExtensible(this.target);var t=e.call(this.handler,this.target);t=!!t;var r=_(this.target);if(t!==r)throw t?new TypeError("cannot report non-extensible object as extensible: "+this.target):new TypeError("cannot report extensible object as non-extensible: "+this.target);return r},getPrototypeOf:function(){var e=this.getTrap("getPrototypeOf");if(void 0===e)return U.getPrototypeOf(this.target);var t=e.call(this.handler,this.target);if(!_(this.target)){var r=T(this.target);if(!f(t,r))throw new TypeError("prototype value does not match: "+this.target)}return t},setPrototypeOf:function(e){var t=this.getTrap("setPrototypeOf");if(void 0===t)return U.setPrototypeOf(this.target,e);var r=t.call(this.handler,this.target,e);if(r=!!r,r&&!_(this.target)){var n=T(this.target);if(!f(e,n))throw new TypeError("prototype value does not match: "+this.target)}return r},getPropertyNames:function(){throw new TypeError("getPropertyNames trap is deprecated")},has:function(e){var t=this.getTrap("has");if(void 0===t)return U.has(this.target,e);e=String(e);var r=t.call(this.handler,this.target,e);if(r=!!r,r===!1){if(d(e,this.target))throw new TypeError("cannot report existing non-configurable own property '"+e+"' as a non-existent property");if(!Object.isExtensible(this.target)&&v(e,this.target))throw new TypeError("cannot report existing own property '"+e+"' as non-existent on a non-extensible object")}return r},get:function(e,t){var r=this.getTrap("get");if(void 0===r)return U.get(this.target,t,e);t=String(t);var n=r.call(this.handler,this.target,t,e),a=Object.getOwnPropertyDescriptor(this.target,t);if(void 0!==a)if(o(a)&&a.configurable===!1&&a.writable===!1){if(!f(n,a.value))throw new TypeError("cannot report inconsistent value for non-writable, non-configurable property '"+t+"'")}else if(i(a)&&a.configurable===!1&&void 0===a.get&&void 0!==n)throw new TypeError("must report undefined for non-configurable accessor property '"+t+"' without getter");return n},set:function(e,t,r){var n=this.getTrap("set");if(void 0===n)return U.set(this.target,t,r,e);t=String(t);var a=n.call(this.handler,this.target,t,r,e);if(a=!!a,a===!0){var u=Object.getOwnPropertyDescriptor(this.target,t);if(void 0!==u)if(o(u)&&u.configurable===!1&&u.writable===!1){if(!f(r,u.value))throw new TypeError("cannot successfully assign to a non-writable, non-configurable property '"+t+"'")}else if(i(u)&&u.configurable===!1&&void 0===u.set)throw new TypeError("setting a property '"+t+"' that has  only a getter")}return a},enumerate:function(){var e=this.getTrap("enumerate");if(void 0===e){for(var t=U.enumerate(this.target),r=[],n=t.next();!n.done;)r.push(String(n.value)),n=t.next();return r}var t=e.call(this.handler,this.target);if(null===t||void 0===t||void 0===t.next)throw new TypeError("enumerate trap should return an iterator, got: "+t);for(var i=Object.create(null),r=[],n=t.next();!n.done;){var o=String(n.value);if(i[o])throw new TypeError("enumerate trap cannot list a duplicate property '"+o+"'");i[o]=!0,r.push(o),n=t.next()}var a=Object.keys(this.target),u=this.target;return a.forEach(function(e){if(!i[e]){if(d(e,u))throw new TypeError("enumerate trap failed to include non-configurable enumerable property '"+e+"'");if(!Object.isExtensible(u)&&v(e,u))throw new TypeError("cannot report existing own property '"+e+"' as non-existent on a non-extensible object")}}),r},iterate:w.prototype.enumerate,apply:function(e,t,r){var n=this.getTrap("apply");if(void 0===n)return U.apply(e,t,r);if("function"==typeof this.target)return n.call(this.handler,e,t,r);throw new TypeError("apply: "+e+" is not a function")},construct:function(e,t,r){var n=this.getTrap("construct");if(void 0===n)return U.construct(e,t,r);if("function"!=typeof e)throw new TypeError("new: "+e+" is not a function");if(void 0===r)r=e;else if("function"!=typeof r)throw new TypeError("new: "+r+" is not a function");return n.call(this.handler,e,t,r)}};var B=new WeakMap;Object.preventExtensions=function(e){var t=B.get(e);if(void 0!==t){if(t.preventExtensions())return e;throw new TypeError("preventExtensions on "+e+" rejected")}return D(e)},Object.seal=function(e){return g(e,"sealed"),e},Object.freeze=function(e){return g(e,"frozen"),e},Object.isExtensible=_=function(e){var t=B.get(e);return void 0!==t?t.isExtensible():A(e)},Object.isSealed=k=function(e){return b(e,"sealed")},Object.isFrozen=j=function(e){return b(e,"frozen")},Object.getPrototypeOf=T=function(e){var t=B.get(e);return void 0!==t?t.getPrototypeOf():S(e)},Object.getOwnPropertyDescriptor=function(e,t){var r=B.get(e);return void 0!==r?r.getOwnPropertyDescriptor(t):R(e,t)},Object.defineProperty=function(e,t,r){var n=B.get(e);if(void 0!==n){var i=p(r),o=n.defineProperty(t,i);if(o===!1)throw new TypeError("can't redefine property '"+t+"'");return e}return C(e,t,r)},Object.defineProperties=function(e,t){var r=B.get(e);if(void 0!==r){for(var n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],a=p(t[o]),u=r.defineProperty(o,a);if(u===!1)throw new TypeError("can't redefine property '"+o+"'")}return e}return M(e,t)},Object.keys=function(e){var t=B.get(e);if(void 0!==t){for(var r=t.ownKeys(),n=[],i=0;i<r.length;i++){var o=String(r[i]),a=Object.getOwnPropertyDescriptor(e,o);void 0!==a&&a.enumerable===!0&&n.push(o)}return n}return L(e)},Object.getOwnPropertyNames=x=function(e){var t=B.get(e);return void 0!==t?t.ownKeys():N(e)},void 0!==V&&(Object.getOwnPropertySymbols=function(e){var t=B.get(e);return void 0!==t?[]:V(e)}),void 0!==I&&(Object.assign=function(e){for(var t=!0,r=0;r<arguments.length;r++){var n=B.get(arguments[r]);if(void 0!==n){t=!1;break}}if(t)return I.apply(Object,arguments);if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var a=arguments[o];if(void 0!==a&&null!==a)for(var u in a)a.hasOwnProperty(u)&&(i[u]=a[u])}return i}),Object.prototype.valueOf=E(Object.prototype.valueOf),Object.prototype.toString=E(Object.prototype.toString),Function.prototype.toString=E(Function.prototype.toString),Date.prototype.toString=E(Date.prototype.toString),Object.prototype.isPrototypeOf=function(e){for(;;){var t=m(B,e);if(void 0===t)return K.call(this,e);if(e=t.getPrototypeOf(),null===e)return!1;if(f(e,this))return!0}},Array.isArray=function(e){var t=m(B,e);return void 0!==t?Array.isArray(t.target):G(e)},Array.prototype.concat=function(){for(var e,t=0;t<arguments.length;t++)P(arguments[t])&&(e=arguments[t].length,arguments[t]=Array.prototype.slice.call(arguments[t],0,e));return F.apply(this,arguments)};var H=Object.setPrototypeOf,W=function(){var e=R(Object.prototype,"__proto__");if(void 0===e||"function"!=typeof e.set)return function(){throw new TypeError("setPrototypeOf not supported on this platform")};try{e.set.call({},{})}catch(t){return function(){throw new TypeError("setPrototypeOf not supported on this platform")}}return C(Object.prototype,"__proto__",{set:function(e){return Object.setPrototypeOf(this,Object(e))}}),e.set}();Object.setPrototypeOf=function(e,t){var r=B.get(e);if(void 0!==r){if(r.setPrototypeOf(t))return e;throw new TypeError("proxy rejected prototype mutation")}if(!_(e))throw new TypeError("can't set prototype on non-extensible object: "+e);if(H)return H(e,t);if(Object(t)!==t||null===t)throw new TypeError("Object prototype may only be an Object or null: "+t);return W.call(e,t),e},Object.prototype.hasOwnProperty=function(e){var t=m(B,this);if(void 0!==t){var r=t.getOwnPropertyDescriptor(e);return void 0!==r}return z.call(this,e)};var U=e.Reflect={getOwnPropertyDescriptor:function(e,t){return Object.getOwnPropertyDescriptor(e,t)},defineProperty:function(e,t,r){var n=B.get(e);if(void 0!==n)return n.defineProperty(e,t,r);var u=Object.getOwnPropertyDescriptor(e,t),l=Object.isExtensible(e);if(void 0===u&&l===!1)return!1;if(void 0===u&&l===!0)return Object.defineProperty(e,t,r),!0;if(c(r))return!0;if(s(u,r))return!0;if(u.configurable===!1){if(r.configurable===!0)return!1;if("enumerable"in r&&r.enumerable!==u.enumerable)return!1}if(a(r));else if(o(u)!==o(r)){if(u.configurable===!1)return!1}else if(o(u)&&o(r)){if(u.configurable===!1){if(u.writable===!1&&r.writable===!0)return!1;if(u.writable===!1&&"value"in r&&!f(r.value,u.value))return!1}}else if(i(u)&&i(r)&&u.configurable===!1){if("set"in r&&!f(r.set,u.set))return!1;if("get"in r&&!f(r.get,u.get))return!1}return Object.defineProperty(e,t,r),!0},deleteProperty:function(e,t){var r=B.get(e);if(void 0!==r)return r["delete"](t);var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n||n.configurable===!0&&(delete e[t],!0)},getPrototypeOf:function(e){return Object.getPrototypeOf(e)},setPrototypeOf:function(e,t){var r=B.get(e);if(void 0!==r)return r.setPrototypeOf(t);if(Object(t)!==t||null===t)throw new TypeError("Object prototype may only be an Object or null: "+t);if(!_(e))return!1;var n=Object.getPrototypeOf(e);if(f(n,t))return!0;if(H)try{return H(e,t),!0}catch(i){return!1}return W.call(e,t),!0},preventExtensions:function(e){var t=B.get(e);return void 0!==t?t.preventExtensions():(D(e),!0)},isExtensible:function(e){return Object.isExtensible(e)},has:function(e,t){return t in e},get:function(e,t,r){r=r||e;var n=B.get(e);if(void 0!==n)return n.get(r,t);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var a=Object.getPrototypeOf(e);if(null===a)return;return U.get(a,t,r)}if(o(i))return i.value;var u=i.get;if(void 0!==u)return i.get.call(r)},set:function(e,t,r,n){n=n||e;var o=B.get(e);if(void 0!==o)return o.set(n,t,r);var a=Object.getOwnPropertyDescriptor(e,t);if(void 0===a){var u=Object.getPrototypeOf(e);if(null!==u)return U.set(u,t,r,n);a={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if(i(a)){var c=a.set;return void 0!==c&&(c.call(n,r),!0)}if(a.writable===!1)return!1;var s=Object.getOwnPropertyDescriptor(n,t);if(void 0!==s){var f={value:r,writable:s.writable,enumerable:s.enumerable,configurable:s.configurable};return Object.defineProperty(n,t,f),!0}if(!Object.isExtensible(n))return!1;var l={value:r,writable:!0,enumerable:!0,configurable:!0};return Object.defineProperty(n,t,l),!0},enumerate:function(e){var t,r=B.get(e);if(void 0!==r)t=r.enumerate(r.target);else{t=[];for(var n in e)t.push(n)}var i=+t.length,o=0;return{next:function(){return o===i?{done:!0}:{done:!1,value:t[o++]}}}},ownKeys:function(e){return x(e)},apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},construct:function(e,t,r){var n=B.get(e);if(void 0!==n)return n.construct(n.target,t,r);if("function"!=typeof e)throw new TypeError("target is not a function: "+e);if(void 0===r)r=e;else if("function"!=typeof r)throw new TypeError("newTarget is not a function: "+e);return new(Function.prototype.bind.apply(r,[null].concat(t)))}};if("undefined"!=typeof Proxy&&"undefined"!=typeof Proxy.create){var J=Proxy.create,$=Proxy.createFunction,q=J({get:function(){throw new TypeError("proxy is revoked")}});e.Proxy=function(e,t){if(Object(e)!==e)throw new TypeError("Proxy target must be an Object, given "+e);if(Object(t)!==t)throw new TypeError("Proxy handler must be an Object, given "+t);var r,n=new w(e,t);return r="function"==typeof e?$(n,function(){var t=Array.prototype.slice.call(arguments);return n.apply(e,this,t)},function(){var t=Array.prototype.slice.call(arguments);return n.construct(e,t)}):J(n,Object.getPrototypeOf(e)),B.set(r,n),r},e.Proxy.revocable=function(e,t){var r=new Proxy(e,t),n=function(){var e=B.get(r);null!==e&&(e.target=null,e.handler=q)};return{proxy:r,revoke:n}},e.Proxy.create=J,e.Proxy.createFunction=$}else"undefined"==typeof Proxy&&(e.Proxy=function(e,t){throw new Error("proxies not supported on this platform. On v8/node/iojs, make sure to pass the --harmony_proxies flag")});Object.keys(U).forEach(function(e){t[e]=U[e]})}(e)}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=function p(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:p(i,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},s=r(5),f=n(s),l=function(e){function t(e,r,n){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n));return a._instance=null,a}return a(t,e),u(t,[{key:"make",value:function(e){return null!==this._instance?this._instance:this._instance=c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"make",this).call(this,e)}}]),t}(f["default"]);t["default"]=l},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,n){r(this,e),this._alias=t,this._reference=n}return n(e,[{key:"make",value:function(){return this.reference.value}},{key:"alias",get:function(){return this._alias}},{key:"reference",get:function(){return this._reference}}]),e}();t["default"]=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(6),u=n(a),c=function(){function e(t,r){i(this,e),this._config=t,this._value=r}return o(e,[{key:"extractAlias",value:function(){return this.value.substr(1,this.value.length-2)}},{key:"isParameter",value:function(){return this.is(u["default"].get(this.config,"paramDelimiter"))}},{key:"isService",value:function(){return this.is(u["default"].get(this.config,"serviceDelimiter"))}},{key:"isTag",value:function(){return this.is(u["default"].get(this.config,"tagDelimiter"))}},{key:"is",value:function(e){return"string"==typeof this.value&&this.value.match("\\"+e+".*\\"+e)}},{key:"config",get:function(){return this._config}},{key:"value",get:function(){return this._value}}]),e}();t["default"]=c},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(11),u=n(a),c=r(12),s=function(){function e(t){i(this,e),this.container=t}return o(e,[{key:"resolveParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.reference.isParameter()?this.resolveParameterReference(e.reference,t,r):this.resolveListenersAndDecorators(e.alias,e.make());
}},{key:"resolveService",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=e.references.map(function(e){return t.resolveReference(e,r,n)});return this.resolveListenersAndDecorators(e.alias,e.make(i))}},{key:"resolveTag",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=e.references.map(function(e){return t.resolveReference(e,r,n)});return e.make(i)}},{key:"resolveParameterReference",value:function(e,t,r){var n=e.extractAlias(),i=this.container.findParameter(n);return r=this.checkCircularDependency(r,t,e),this.resolveParameter(i,e,r)}},{key:"resolveServiceReference",value:function(e,t,r){var n=e.extractAlias(),i=this.container.findService(n);return r=this.checkCircularDependency(r,t,e),this.resolveService(i,e,r)}},{key:"resolveTagReference",value:function(e,t,r){var n=e.extractAlias(),i=this.container.findTag(n);return r=this.checkCircularDependency(r,t,e),this.resolveTag(i,e,r)}},{key:"resolveReference",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.isParameter()?this.resolveParameterReference(e,t,r):e.isService()?this.resolveServiceReference(e,t,r):e.isTag()?this.resolveTagReference(e,t,r):e.value}},{key:"resolveListenersAndDecorators",value:function(e,t){return t=this.container.decoratorResolver.apply(e,t),this.container.eventDispatcher.dispatchOnResolved(e,t),t}},{key:"checkCircularDependency",value:function(e,t,r){if(null!==t&&null!==r){e.push([t.extractAlias(),r.extractAlias()]);try{return(0,u["default"])(e),e}catch(n){throw(0,c.circularDependencyException)(this.generateCircularDependencyMessage(e))}}}},{key:"generateCircularDependencyMessage",value:function(e){var t=e.reverse().reduce(function(e,t){return 0!==e.length&&e[e.length-1]!==t[1]||e.push(t[0]),e},[]);return t.join(" -> ").concat(" -> "+t[0])}}]),e}();t["default"]=s},function(e,t){function r(e,t){function r(a,u,c){if(c.indexOf(a)>=0)throw new Error("Cyclic dependency: "+JSON.stringify(a));if(!~e.indexOf(a))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(a));if(!o[u]){o[u]=!0;var s=t.filter(function(e){return e[0]===a});if(u=s.length){var f=c.concat(a);do{var l=s[--u][1];r(l,e.indexOf(l),f)}while(u)}i[--n]=a}}for(var n=e.length,i=new Array(n),o={},a=n;a--;)o[a]||r(e[a],a,[]);return i}function n(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.indexOf(i[0])<0&&t.push(i[0]),t.indexOf(i[1])<0&&t.push(i[1])}return t}e.exports=t=function(e){return r(n(e),e)},t.array=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.paramNotRegisteredException=function(e){return new Error("Parameter '"+e+"' not registered in flask.")},t.serviceNotRegisteredException=function(e){return new Error("Service '"+e+"' not registered in flask.")},t.tagNotRegisteredException=function(e){return new Error("Tag '"+e+"' not registered in flask.")},t.circularDependencyException=function(e){return new Error("Circular dependency detected: "+e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(6),c=n(u),s=r(14),f=r(16),l=r(17),p=function(){function e(t){i(this,e),this.container=t}return a(e,[{key:"instantiationConfiguration",value:function(e){this.registerDefaultConfiguration(),this.merge(e)}},{key:"merge",value:function(e){this.registerConfigValues(e),this.registerParameters(e),this.registerServices(e),this.registerGlobalDecorators(e),this.registerGlobalListeners(e)}},{key:"registerDefaultConfiguration",value:function(){this.container.addConfigValue("serviceDelimiter",l.SERVICE_DELIMITER_CHAR),this.container.addConfigValue("paramDelimiter",l.PARAMETER_DELIMITER_CHAR),this.container.addConfigValue("tagDelimiter",l.TAG_DELIMITER_CHAR)}},{key:"registerConfigValues",value:function(e){var t=c["default"].get(e,"config")||{};for(var r in t)this.container.addConfigValue(r,t[r])}},{key:"registerParameters",value:function(e){var t=c["default"].get(e,"parameters")||{};for(var r in t){var n="object"===o(t[r]),i=n?t[r].value:t[r],a=n?c["default"].get(t[r],"tags")||[]:[],u=n?c["default"].get(t[r],"decorators")||[]:[];this.container.addParameter(r,i),this.registerTags(r,a,this.container.getConfigValue("paramDelimiter")),this.registerDecorators(r,u)}}},{key:"registerServices",value:function(e){var t=c["default"].get(e,"services")||{};for(var r in t){var n=c["default"].get(t[r],"service"),i=c["default"].get(t[r],"arguments")||[],o=c["default"].get(t[r],"tags")||[],a=c["default"].get(t[r],"decorators")||[],u=c["default"].get(t[r],"listeners")||{},s=c["default"].get(t[r],"singleton")||!1;this.container.addService(r,n,i,s),this.registerTags(r,o,this.container.getConfigValue("serviceDelimiter")),this.registerListeners(r,u),this.registerDecorators(r,a)}}},{key:"registerTags",value:function(e,t,r){Array.isArray(t)||(t=[t]);for(var n in t)this.container.addTag(t[n],""+r+e+r)}},{key:"registerGlobalDecorators",value:function(e){var t=c["default"].get(e,"decorators")||[];this.registerDecorators(f.GLOBAL_NAMESPACE,t)}},{key:"registerDecorators",value:function(e,t){Array.isArray(t)||(t=[t]);for(var r in t)this.container.addDecorator(e,t[r])}},{key:"registerGlobalListeners",value:function(e){var t=c["default"].get(e,"listeners")||{};this.registerListeners(s.GLOBAL_NAMESPACE,t)}},{key:"registerListeners",value:function(e,t){for(var r in t)for(var n in t[r])this.container.addListener(r,e,t[r][n])}}]),e}();t["default"]=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBAL_NAMESPACE=void 0;var o=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(c){i=!0,o=c}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(6),c=n(u),s=r(15),f=t.GLOBAL_NAMESPACE="__global__",l=function(){function e(t){i(this,e),this.flask=t,this.listeners={}}return a(e,[{key:"addListener",value:function(e,t,r){var n=this.normalizeListener(e,t,r),i=o(n,3);return e=i[0],t=i[1],r=i[2],this.getEventPlaceholder(e,t).push(r),this}},{key:"dispatch",value:function(e,t,r){var n=this;this.findGlobalEvent(e,f).concat(this.findServiceEvent(e,t)).map(function(e){e(r,n.flask)})}},{key:"dispatchOnResolved",value:function(e,t){this.dispatch(s.ON_RESOLVED,e,t)}},{key:"findServiceEvent",value:function(e,t){return c["default"].has(this.listeners,e)?c["default"].get(this.listeners[e],t)||[]:[]}},{key:"findGlobalEvent",value:function(e){return this.findServiceEvent(e,f)}},{key:"normalizeListener",value:function(e,t,r){return"function"==typeof t&&(r=t,t=f),[e,t,r]}},{key:"getEventPlaceholder",value:function(e,t){return c["default"].has(this.listeners,e)||(this.listeners[e]={}),Array.isArray(this.listeners[e][t])||(this.listeners[e][t]=[]),this.listeners[e][t]}}]),e}();t["default"]=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ON_RESOLVED="resolved"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GLOBAL_NAMESPACE=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(6),u=n(a),c=t.GLOBAL_NAMESPACE="__global__",s=function(){function e(t){i(this,e),this.flask=t,this.decorators={}}return o(e,[{key:"find",value:function(e){return u["default"].get(this.decorators,e)||[]}},{key:"add",value:function(e,t){"function"==typeof e&&(t=e,e=c),this.decorators[e]=(this.decorators[e]||[]).concat(t)}},{key:"apply",value:function(e,t){var r=this;return this.find(c).concat(this.find(e)).reduce(function(e,t){return t(e,r.flask)},t)}}]),e}();t["default"]=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PARAMETER_DELIMITER_CHAR="%",t.SERVICE_DELIMITER_CHAR="@",t.TAG_DELIMITER_CHAR="#"}]);